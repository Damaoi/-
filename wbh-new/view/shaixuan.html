<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>-->
    <meta name="full-screen" content="yes"/>
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name = "format-detection" content = "telephone=no">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../images/nav/logo.png">
    <title>展馆分布</title>
    <link rel="stylesheet" href="../css/reset.css"/>
    <link rel="stylesheet" href="../css/shaixuan.css"/>
    <link rel="stylesheet" href="../css/public.css"/>
    <script src="../js/jquery-2.1.4.min.js"></script>
    <script src="../js/base.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=iPcIa8FEwTYRNMahLp2nLHEvo8hbp1Gk">
    </script>
    <script src="../js/maplib.js"></script>
    <script src="../js/textIconOverlay.js"></script>
    <style>
        html{
            height: 100%;
            overflow: hidden;
        }
        body{
         padding-top: .8rem;
        }
        .box {
            max-width: 7.5rem;
            background-color: #fff;
            margin: 0 auto;
            overflow: hidden;
            height: 100%;
        }
        #allmap{
            height: 12rem;
            width: 7.5rem;
        }
        .BMap_noprint{
            bottom: 40px!important;
        }
    </style>
</head>
<body>
<div class="box">
    <!--公共头部布局开始-->
    <div class="header">
        <div class="header-c">
            <div class="hc-l">
                <a href="javascript:history.back();">
                    <img src="../images/own/back.png" alt=""/>
                </a>
                <p>返回</p>
            </div>
            <div class="hc-c">
                <p>展馆分布</p>
            </div>
            <div class="hc-r">
                <a href="javascript:;">
                    <img src="../images/own/search.png" alt=""/>
                </a>
            </div>
        </div>
    </div>
    <!--公共头部布局开始-->



    <!--平行tab切换开始-->
    <div class="pxtab">
        <div class="pxtab-t">
            <div class="pxt-l">
                <p>展馆类型</p>
                <a href="javascript:;">
                    <img src="../images/own/daosanjiao.png" alt=""/>
                </a>
            </div>
            <div class="pxt-r">
                <p>行业筛选</p>
                <a href="javascript:;">
                    <img src="../images/own/loudou.png" alt=""/>
                </a>
            </div>
        </div>
    </div>
    <!--平行tab切换结束-->


    <div id="allmap"></div>


    <!--底部拉伸栏-->
    <div class="footjs">
        <div class="footjs-t" id="foots">
            <p>找到<span>&nbsp;9713&nbsp;</span>家参展企业</p>
            <i></i>
        </div>
        <div class="footjs-f">
            <a href="http://vr.cneme.cn/tour/f0c6f241776462df">
                <div class="redtg">
                    <div class="chuishi">
                        <p class="tuip">推广</p>
                        <div class="csl">
                            <i>
                                <img src="../images/company/yutong.png" alt=""/>
                            </i>
                        </div>
                        <div class="csc">
                            <p class="cscp1">郑州宇通客车股份有限公司</p>
                            <p class="cscp2">主营：公交、客运、专用等客车</p>
                            <p class="cscp3">地址：郑州市管城区宇通路宇通工业园</p>
                        </div>
                        <div class="csr">
                            <p>122公里</p>
                            <i>
                                <img src="../images/own/huisejian.png" alt=""/>
                            </i>
                        </div>
                    </div>
                </div>
            </a>
            <a href="http://vr.cneme.cn/tour/230c051c60912b02">
                <div class="chuishi">
                    <div class="csl">
                        <i>
                            <img src="../images/company/weihua.png" alt=""/>
                        </i>
                    </div>
                    <div class="csc">
                        <p class="cscpp1">卫华集团有限公司</p>
                        <p class="cscp2">主营：起重机、港口机械等</p>
                        <p class="cscp3">地址：河南省长垣县卫华大道西段</p>
                    </div>
                    <div class="csr">
                        <p>122公里</p>
                        <i>
                            <img src="../images/own/huisejian.png" alt=""/>
                        </i>
                    </div>
                </div>
            </a>
            <a href="http://vr.cneme.cn/tour/fb515129c86c33e7">
                <div class="chuishi">
                    <div class="csl">
                        <i>
                            <img src="../images/company/zhongtie.png" alt=""/>
                        </i>
                    </div>
                    <div class="csc">
                        <p class="cscpp1">中铁工程装备集团有限公司</p>
                        <p class="cscp2">主营：盾构、TBM等隧道施工设备</p>
                        <p class="cscp3">地址：郑州市经济开发区第六大街99号</p>
                    </div>
                    <div class="csr">
                        <p>122公里</p>
                        <i>
                            <img src="../images/own/huisejian.png" alt=""/>
                        </i>
                    </div>
                </div>
            </a>
            <a href="http://vr.cneme.cn/tour/f10e2997e0389a0e">
                <div class="chuishi">
                    <div class="csl">
                        <i>
                            <img src="../images/company/yufei.png" alt=""/>
                        </i>
                    </div>
                    <div class="csc">
                        <p class="cscpp1">豫飞重工集团</p>
                        <p class="cscp2">主营：起重机、港口起重机、吊具</p>
                        <p class="cscp3">地址：新乡市经济技术开发区豫飞产业园</p>
                    </div>
                    <div class="csr">
                        <p>122公里</p>
                        <i>
                            <img src="../images/own/huisejian.png" alt=""/>
                        </i>
                    </div>
                </div>
            </a>
            <a href="http://vr.cneme.cn/tour/f10e2997e0389a0e">
                <div class="chuishi">
                    <div class="csl">
                        <i>
                            <img src="../images/company/weihua.png" alt=""/>
                        </i>
                    </div>
                    <div class="csc">
                        <p class="cscpp1">主营：起重机、港口起重机、吊具</p>
                        <p class="cscp2">主营：公交、客运、专用等客车</p>
                        <p class="cscp3">地址：郑州市管城区宇通路宇通工业园</p>
                    </div>
                    <div class="csr">
                        <p>122公里</p>
                        <i>
                            <img src="../images/own/huisejian.png" alt=""/>
                        </i>
                    </div>
                </div>
            </a>
            <a href="javascript:;">
                <div class="chuishi">
                    <div class="csl">
                        <i>
                            <img src="../images/company/weihua.png" alt=""/>
                        </i>
                    </div>
                    <div class="csc">
                        <p class="cscpp1">郑州宇通客车股份有限公司</p>
                        <p class="cscp2">主营：公交、客运、专用等客车</p>
                        <p class="cscp3">地址：郑州市管城区宇通路宇通工业园</p>
                    </div>
                    <div class="csr">
                        <p>122公里</p>
                        <i>
                            <img src="../images/own/huisejian.png" alt=""/>
                        </i>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <!--底部拉伸栏-->


    <div class="twoinfo">
        <a href="javascript:;" class="twoinfo-c">
            <div class="twoinfocl">
                <i>
                    <img src="../images/company/yufei.png" alt=""/>
                </i>
            </div>
            <div class="twoinfocc">
                <p class="cscpp1">主营：起重机、港口起重机、吊具</p>
                <p class="cscp2">主营：公交、客运、专用等客车</p>
                <p class="cscp3">地址：郑州市管城区宇通路宇通工业园</p>
            </div>
            <div class="twoinfocr">
                <p>122公里</p>
                <i>
                    <img src="../images/own/huisejian.png" alt=""/>
                </i>
            </div>
        </a>
    </div>




    <!--内容开始-->
    <div class="shadow">
        <div class="pxtab-b">
            <a href="javascript:;" class="alllx">
                <p>全部类型</p>
            </a>
            <div class="fenping">
                <div class="zglx">
                    <div class="zglx-l">
                        <a href="javascript:;" style="background-color: #ffffff;color: #e83328"><span class="redline"></span>一带一路馆</a>
                        <a href="javascript:;"><span></span>园区馆</a>
                        <a href="javascript:;"><span></span>集聚区馆</a>
                        <a href="javascript:;"><span></span>会展馆</a>
                        <a href="javascript:;"><span></span>装备协会馆</a>
                        <a href="javascript:;"><span></span>商协会馆</a>
                        <a href="javascript:;"><span></span>研究院馆</a>
                    </div>

                    <div style="width: .25rem"></div>

                    <div class="zglx-r">
                        <div class="zglxr">
                            <p class="ztitle">推荐展商</p>
                            <div class="tjzsimg">
                                <a href="javascript:;">
                                    <img src="../images/company/zhonghua.png" alt=""/>
                                </a>
                                <a href="javascript:;">
                                <img src="../images/company/zhongtian.png" alt=""/>
                            </a>
                            </div>
                            <table border="1" bordercolor="#d2d2d2">
                                <tr>
                                    <td>
                                        <a href="javascript:;">
                                            哈萨克斯坦
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:;">
                                            阿联酋
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <a href="javascript:;">
                                            新加坡
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:;">
                                            马来西亚
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <a href="javascript:;">
                                            缅甸
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:;">
                                            泰国
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <a href="javascript:;">
                                            巴基斯坦
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:;">
                                            阿富汗
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <a href="javascript:;">
                                            塔吉克斯坦
                                        </a>
                                    </td>
                                    <td>
                                        <a href="javascript:;">
                                            哈萨克斯坦
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">园区馆</p>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">集聚区馆</p>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">会展馆</p>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">装备协会馆</p>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">商协会馆</p>
                        </div>
                        <div class="zglxr">
                            <p class="ztitle">研究院馆</p>
                        </div>
                    </div>
                    <div style="width: .25rem"></div>
                </div>
                <div class="hysx">

                </div>
            </div>
        </div>
    </div>
    <!--内容结束-->
</div>
<script>
    $(document).ready(function () {
        $(".pxt-l").on("click",function(){
            $(".shadow").show();
            $(".zglx").show();
            $(".hysx").hide();
            $("html").css({
                "height" : "100%",
                "overflow" : "hidden"
            })
        })
        $(".pxt-r").on("click",function(){
            $(".shadow").show();
            $(".hysx").show();
            $(".zglx").hide();
        })
        $(".zglx-l>a").on("click",function(){
            $(".zglx-l>a>span").removeClass("redline").eq($(this).index()).addClass("redline")
            $(this).css({
                "color" : "#e83328",
                "background" : "#ffffff",
                "borderRight" : "none"
            }).siblings().css({
                "color" : "#333333",
                "background" : "#f0f0f0",
                "borderRight" : ".01rem solid #d2d2d2"
            })
            $(".zglx-r>div").hide().eq($(this).index()).show();
        })

        $(".shadow").on("click",function(){
            $(".shadow").hide()
        })
        $('.fenping').on('click',function(e){
            e.stopPropagation();
        })


//        touch事件
        var box = document.getElementById("foots");
        var startx, starty;
        //获得角度
        function getAngle(angx, angy) {
            return Math.atan2(angy, angx) * 180 / Math.PI;
        };

        //根据起点终点返回方向 1向上 2向下 3向左 4向右 0未滑动
        function getDirection(startx, starty, endx, endy) {
            var angx = endx - startx;
            var angy = endy - starty;
            var result = 0;

            //如果滑动距离太短
            if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {
                return result;
            }

            var angle = getAngle(angx, angy);
            if (angle >= -135 && angle <= -45) {
                result = 1;
            } else if (angle > 45 && angle < 135) {
                result = 2;
            } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
                result = 3;
            } else if (angle >= -45 && angle <= 45) {
                result = 4;
            }

            return result;
        }
        //手指接触屏幕
        box.addEventListener("touchstart", function(e) {
            startx = e.touches[0].pageX;
            starty = e.touches[0].pageY;
        }, false);
        //手指离开屏幕
        box.addEventListener("touchend", function(e) {
            var endx, endy;
            endx = e.changedTouches[0].pageX;
            endy = e.changedTouches[0].pageY;
            var direction = getDirection(startx, starty, endx, endy);
            switch (direction) {
                case 0:
//                alert("未滑动！");
                    break;
                case 1:
                    $(".footjs").css({
                        "bottom" : "-0.2rem",
                        "transition" : "all 0.5s linear"
                    })
                        $("body").css({
                            "height" : "100%",
                            "overflow" : "hidden",
                        })
                    break;
                case 2:
                    $(".footjs").css({
                        "bottom" : "-7.4rem",
                        "transition" : "all 0.5s linear"
                    })
                    break;
                case 3:
//                alert("向左！")
                    break;
                case 4:
//                alert("向右！")
                    break;
                default:
            }
        }, false);
//        touch事件




// 百度地图API功能
        var map = new BMap.Map("allmap");    // 创建Map实例
        map.centerAndZoom(new BMap.Point(113.635756,34.753933), 12);  // 初始化地图,设置中心点坐标和地图级别
        map.addControl(new BMap.OverviewMapControl());
        map.setCurrentCity("郑州");          // 设置地图显示的城市 此项是必须设置的
        map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
        var navigationControl = new BMap.NavigationControl({
            // 靠左上角位置
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            // LARGE类型
            type: BMAP_NAVIGATION_CONTROL_LARGE,
            // 启用显示定位
            enableGeolocation: true
        });
        map.addControl(navigationControl);
        // 添加定位控件
        var geolocationControl = new BMap.GeolocationControl();
        geolocationControl.addEventListener("locationSuccess", function(e){
            // 定位成功事件
            var address = '';
            address += e.addressComponent.province;
            address += e.addressComponent.city;
            address += e.addressComponent.district;
            address += e.addressComponent.street;
            address += e.addressComponent.streetNumber;
            alert("当前定位地址为：" + address);
        });
        geolocationControl.addEventListener("locationError",function(e){
            // 定位失败事件
            alert(e.message);
        });
        map.addControl(geolocationControl);

        //===================这里添加点进去之后的点
        var xy = [
            {'x':113.648979,'y':34.751561},
            {'x':113.660478,'y':34.747053},
            {'x':113.64438,'y':34.748476},
            {'x':113.6624,'y':34.752406},

        ];
        var markers = [];
        var pt = null;
        for (var i in xy) {
            pt = new BMap.Point(xy[i].x , xy[i].y);
            markers.push(new BMap.Marker(pt));
        }
        //最简单的用法，生成一个marker数组，然后调用markerClusterer类即可。
        var markerClusterer = new BMapLib.MarkerClusterer(map,
                {
                    markers:markers,
                    girdSize : 100,
                    styles : [{
                        url:'../images/own/four.png',
                        size: new BMap.Size(70,70),
//                    backgroundColor : '#E64B4E'
                    }],
                });
        markerClusterer.setMaxZoom(13);
        markerClusterer.setGridSize(100);


        map.setMapStyle({
            styleJson:[
                {
                    "featureType": "land",
                    "elementType": "geometry",
                    "stylers": {
                        "color": "#f5f5f5"
                    }
                },
                {
                    "featureType": "highway",
                    "elementType": "geometry.stroke",
                    "stylers": {
                        "color": "#16cdd0"
                    }
                },
                {
                    "featureType": "arterial",
                    "elementType": "geometry.stroke",
                    "stylers": {
                        "color": "#16cdd0"
                    }
                }
            ]
        });




        //=======================这里添加外面的数量
        var xy1 = [
            {'x':113.639781,'y':34.768168},
            {'x':113.660478,'y':34.747053},
            {'x':113.64208,'y':34.730441}
        ];
        var markers1 = [];
        var pt = null;
        for (var i in xy1) {
            pt = new BMap.Point(xy1[i].x , xy1[i].y);
            markers1.push(new BMap.Marker(pt));
        }
//    最简单的用法，生成一个marker数组，然后调用markerClusterer类即可。
        var markerClusterer1 = new BMapLib.MarkerClusterer(map,
                {
                    markers:markers1,
                    girdSize : 100,
                    styles : [{
                        url:'../images/own/four.png',
                        size: new BMap.Size(70, 70),
//                    backgroundColor : '#4783E7'
                    }],
                });
        markerClusterer1.setMaxZoom(13);
        markerClusterer1.setGridSize(100);
        console.log(markerClusterer1);
        console.log(markerClusterer);

        $(".zaodao").on("click",function(){
            $(".twoinfo").css({
                "display" : "block"
            })
        })
    })
</script>
</body>
</html>